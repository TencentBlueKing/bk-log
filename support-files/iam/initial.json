{
    "system_id":"bk_log_search",
    "operations":[
        {
            "operation":"upsert_system",
            "data":{
                "id":"bk_log_search",
                "name":"日志平台",
                "name_en":"BK LOG",
                "description":"蓝鲸智云日志平台是为了解决运维场景中查询日志难的问题而推出的一款Saas，基于业界主流的全文检索引擎，通过蓝鲸智云的专属agent进行日志采集，无需登录各台机器，集中管理所有日志。",
                "description_en":"BlueKing Log System is a SaaS to solve the problem that it is difficult to query logs in operation and maintenance scenarios, With full-text search engine based on the mainstream in the industry. It collects logs through BlueKing's exclusive agent without logging in to each machine and manages all logs centrally.",
                "clients":"bk_log_search,log-search-4,bk_bklog",
                "provider_config":{
                    "host":"",
                    "auth":"basic"
                }
            }
        },
        {
            "operation":"upsert_resource_type",
            "data":{
                "id":"collection",
                "name":"采集项",
                "name_en":"Collection",
                "description":"",
                "description_en":"",
                "parents":[
                    {
                        "system_id":"bk_cmdb",
                        "id":"biz"
                    }
                ],
                "provider_config":{
                    "path":"/api/v1/iam/resource/"
                },
                "version":1
            }
        },
        {
            "operation":"upsert_resource_type",
            "data":{
                "id":"es_source",
                "name":"ES源",
                "name_en":"ES Source",
                "description":"",
                "description_en":"",
                "parents":[
                    {
                        "system_id":"bk_cmdb",
                        "id":"biz"
                    }
                ],
                "provider_config":{
                    "path":"/api/v1/iam/resource/"
                },
                "version":1
            }
        },
        {
            "operation":"upsert_resource_type",
            "data":{
                "id":"indices",
                "name":"索引集",
                "name_en":"Indices",
                "description":"",
                "description_en":"",
                "parents":[
                    {
                        "system_id":"bk_cmdb",
                        "id":"biz"
                    }
                ],
                "provider_config":{
                    "path":"/api/v1/iam/resource/"
                },
                "version":1
            }
        },
        {
            "operation":"upsert_instance_selection",
            "data":{
                "id":"collection_list",
                "name":"采集项列表",
                "name_en":"Collection List",
                "resource_type_chain":[
                    {
                        "system_id":"bk_cmdb",
                        "id":"biz"
                    },
                    {
                        "system_id":"bk_log_search",
                        "id":"collection"
                    }
                ]
            }
        },
        {
            "operation":"upsert_instance_selection",
            "data":{
                "id":"es_source_list",
                "name":"ES源列表",
                "name_en":"ES Source List",
                "resource_type_chain":[
                    {
                        "system_id":"bk_cmdb",
                        "id":"biz"
                    },
                    {
                        "system_id":"bk_log_search",
                        "id":"es_source"
                    }
                ]
            }
        },
        {
            "operation":"upsert_instance_selection",
            "data":{
                "id":"indices_list",
                "name":"索引集列表",
                "name_en":"Indices List",
                "resource_type_chain":[
                    {
                        "system_id":"bk_cmdb",
                        "id":"biz"
                    },
                    {
                        "system_id":"bk_log_search",
                        "id":"indices"
                    }
                ]
            }
        },
        {
            "operation":"upsert_action",
            "data":{
                "id":"view_business",
                "name":"业务访问",
                "name_en":"View Business",
                "type":"view",
                "version":1,
                "related_resource_types":[
                    {
                        "id":"biz",
                        "system_id":"bk_cmdb",
                        "selection_mode":"instance",
                        "related_instance_selections":[
                            {
                                "system_id":"bk_cmdb",
                                "id":"business"
                            }
                        ],
                        "ignore_iam_path":true
                    }
                ],
                "related_actions":[

                ],
                "description":"",
                "description_en":""
            }
        },
        {
            "operation":"upsert_action",
            "data":{
                "id":"search_log",
                "name":"日志检索",
                "name_en":"Search Log",
                "type":"view",
                "version":1,
                "related_resource_types":[
                    {
                        "system_id":"bk_log_search",
                        "id":"indices",
                        "selection_mode":"instance",
                        "related_instance_selections":[
                            {
                                "system_id":"bk_log_search",
                                "id":"indices_list",
                                "ignore_iam_path":true
                            }
                        ]
                    }
                ],
                "related_actions":[

                ],
                "description":"",
                "description_en":""
            }
        },
        {
            "operation":"upsert_action",
            "data":{
                "id":"view_collection",
                "name":"采集查看",
                "name_en":"View Collection",
                "type":"view",
                "version":1,
                "related_resource_types":[
                    {
                        "system_id":"bk_log_search",
                        "id":"collection",
                        "selection_mode":"instance",
                        "related_instance_selections":[
                            {
                                "system_id":"bk_log_search",
                                "id":"collection_list",
                                "ignore_iam_path":true
                            }
                        ]
                    }
                ],
                "related_actions":[

                ],
                "description":"",
                "description_en":""
            }
        },
        {
            "operation":"upsert_action",
            "data":{
                "id":"create_collection",
                "name":"采集新建",
                "name_en":"Create Collection",
                "type":"create",
                "version":1,
                "related_resource_types":[
                    {
                        "id":"biz",
                        "system_id":"bk_cmdb",
                        "selection_mode":"instance",
                        "related_instance_selections":[
                            {
                                "system_id":"bk_cmdb",
                                "id":"business",
                                "ignore_iam_path":true
                            }
                        ]
                    }
                ],
                "related_actions":[
                    "view_business"
                ],
                "description":"",
                "description_en":""
            }
        },
        {
            "operation":"upsert_action",
            "data":{
                "id":"manage_collection",
                "name":"采集管理",
                "name_en":"Manage Collection",
                "type":"manage",
                "version":1,
                "related_resource_types":[
                    {
                        "system_id":"bk_log_search",
                        "id":"collection",
                        "selection_mode":"instance",
                        "related_instance_selections":[
                            {
                                "system_id":"bk_log_search",
                                "id":"collection_list",
                                "ignore_iam_path":true
                            }
                        ]
                    }
                ],
                "related_actions":[

                ],
                "description":"",
                "description_en":""
            }
        },
        {
            "operation":"upsert_action",
            "data":{
                "id":"create_es_source",
                "name":"ES源配置新建",
                "name_en":"Create ES Source",
                "type":"create",
                "version":1,
                "related_resource_types":[
                    {
                        "id":"biz",
                        "system_id":"bk_cmdb",
                        "selection_mode":"instance",
                        "related_instance_selections":[
                            {
                                "system_id":"bk_cmdb",
                                "id":"business",
                                "ignore_iam_path":true
                            }
                        ]
                    }
                ],
                "related_actions":[
                    "view_business"
                ],
                "description":"",
                "description_en":""
            }
        },
        {
            "operation":"upsert_action",
            "data":{
                "id":"manage_es_source",
                "name":"ES源配置管理",
                "name_en":"Manage ES Source",
                "type":"manage",
                "version":1,
                "related_resource_types":[
                    {
                        "system_id":"bk_log_search",
                        "id":"es_source",
                        "selection_mode":"instance",
                        "related_instance_selections":[
                            {
                                "system_id":"bk_log_search",
                                "id":"es_source_list",
                                "ignore_iam_path":true
                            }
                        ]
                    }
                ],
                "related_actions":[

                ],
                "description":"",
                "description_en":""
            }
        },
        {
            "operation":"upsert_action",
            "data":{
                "id":"create_indices",
                "name":"索引集配置新建",
                "name_en":"Create Indices",
                "type":"create",
                "version":1,
                "related_resource_types":[
                    {
                        "id":"biz",
                        "system_id":"bk_cmdb",
                        "selection_mode":"instance",
                        "related_instance_selections":[
                            {
                                "system_id":"bk_cmdb",
                                "id":"business",
                                "ignore_iam_path":true
                            }
                        ]
                    }
                ],
                "related_actions":[
                    "view_business"
                ],
                "description":"",
                "description_en":""
            }
        },
        {
            "operation":"upsert_action",
            "data":{
                "id":"manage_indices",
                "name":"索引集配置管理",
                "name_en":"Manage Indices",
                "type":"manage",
                "version":1,
                "related_resource_types":[
                    {
                        "system_id":"bk_log_search",
                        "id":"indices",
                        "selection_mode":"instance",
                        "related_instance_selections":[
                            {
                                "system_id":"bk_log_search",
                                "id":"indices_list",
                                "ignore_iam_path":true
                            }
                        ]
                    }
                ],
                "related_actions":[

                ],
                "description":"",
                "description_en":""
            }
        },
        {
            "operation":"upsert_action",
            "data":{
                "id":"view_dashboard",
                "name":"仪表盘查看",
                "name_en":"View Dashboard",
                "type":"view",
                "version":1,
                "related_resource_types":[
                    {
                        "id":"biz",
                        "system_id":"bk_cmdb",
                        "selection_mode":"instance",
                        "related_instance_selections":[
                            {
                                "system_id":"bk_cmdb",
                                "id":"business",
                                "ignore_iam_path":true
                            }
                        ]
                    }
                ],
                "related_actions":[
                    "view_business"
                ],
                "description":"",
                "description_en":""
            }
        },
        {
            "operation":"upsert_action",
            "data":{
                "id":"manage_dashboard",
                "name":"仪表盘管理",
                "name_en":"Manage Dashboard",
                "type":"manage",
                "version":1,
                "related_resource_types":[
                    {
                        "id":"biz",
                        "system_id":"bk_cmdb",
                        "selection_mode":"instance",
                        "related_instance_selections":[
                            {
                                "system_id":"bk_cmdb",
                                "id":"business",
                                "ignore_iam_path":true
                            }
                        ]
                    }
                ],
                "related_actions":[
                    "view_business"
                ],
                "description":"",
                "description_en":""
            }
        },
        {
            "operation":"upsert_action",
            "data":{
                "id":"manage_extract_config",
                "name":"日志提取配置管理",
                "name_en":"Manage Extract Config",
                "type":"manage",
                "version":1,
                "related_resource_types":[
                    {
                        "id":"biz",
                        "system_id":"bk_cmdb",
                        "selection_mode":"instance",
                        "related_instance_selections":[
                            {
                                "system_id":"bk_cmdb",
                                "id":"business",
                                "ignore_iam_path":true
                            }
                        ]
                    }
                ],
                "related_actions":[

                ],
                "description":"",
                "description_en":""
            }
        },
        {
            "operation":"upsert_action_groups",
            "data":[
                {
                    "name":"业务",
                    "name_en":"Business",
                    "actions":[
                        {
                            "id":"view_business"
                        }
                    ],
                    "sub_groups":[
                        {
                            "name":"索引集",
                            "name_en":"Indices",
                            "actions":[
                                {
                                    "id":"search_log"
                                },
                                {
                                    "id":"create_indices"
                                },
                                {
                                    "id":"manage_indices"
                                }
                            ]
                        },
                        {
                            "name":"采集",
                            "name_en":"Collection",
                            "actions":[
                                {
                                    "id":"create_collection"
                                },
                                {
                                    "id":"view_collection"
                                },
                                {
                                    "id":"manage_collection"
                                }
                            ]
                        },
                        {
                            "name":"ES源",
                            "name_en":"ES Source",
                            "actions":[
                                {
                                    "id":"create_es_source"
                                },
                                {
                                    "id":"manage_es_source"
                                }
                            ]
                        },
                        {
                            "name":"仪表盘",
                            "name_en":"Dashboard",
                            "actions":[
                                {
                                    "id":"view_dashboard"
                                },
                                {
                                    "id":"manage_dashboard"
                                }
                            ]
                        },
                        {
                            "name":"日志提取",
                            "name_en":"Log Extract",
                            "actions":[
                                {
                                    "id":"manage_extract_config"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "operation":"upsert_resource_creator_actions",
            "data":{
                "config":[
                    {
                        "id":"collection",
                        "actions":[
                            {
                                "id":"view_collection",
                                "required":true
                            },
                            {
                                "id":"manage_collection",
                                "required":true
                            }
                        ]
                    },
                    {
                        "id":"indices",
                        "actions":[
                            {
                                "id":"manage_indices",
                                "required":true
                            },
                            {
                                "id":"search_log",
                                "required":false
                            }
                        ]
                    },
                    {
                        "id":"es_source",
                        "actions":[
                            {
                                "id":"manage_es_source",
                                "required":false
                            }
                        ]
                    }
                ]
            }
        },
        {
            "operation":"upsert_common_actions",
            "data":[
                {
                    "name":"配置管理",
                    "name_en":"Manage Settings",
                    "actions":[
                        {
                            "id":"view_business"
                        },
                        {
                            "id":"search_log"
                        },
                        {
                            "id":"view_collection"
                        },
                        {
                            "id":"create_collection"
                        },
                        {
                            "id":"manage_collection"
                        },
                        {
                            "id":"create_es_source"
                        },
                        {
                            "id":"manage_es_source"
                        },
                        {
                            "id":"create_indices"
                        },
                        {
                            "id":"manage_indices"
                        },
                        {
                            "id":"view_dashboard"
                        },
                        {
                            "id":"manage_dashboard"
                        },
                        {
                            "id":"manage_extract_config"
                        }
                    ]
                },
                {
                    "name":"日志查看",
                    "name_en":"View Log",
                    "actions":[
                        {
                            "id":"view_business"
                        },
                        {
                            "id":"search_log"
                        },
                        {
                            "id":"view_collection"
                        },
                        {
                            "id":"view_dashboard"
                        }
                    ]
                }
            ]
        }
    ]
}